[Command]
Command="
  copyq:
  var title = 'Recents'
  var maxRecent = 20

  // Tab to search.
  var tab_name = config('clipboard_tab')
  if (!tab_name)
    tab_name = tab()[0]
  tab(tab_name)

  // Search items.
  var matches = []
  var numItemsShow = Math.min(maxRecent, count())
  for (var i = 0; i < numItemsShow; ++i) {
    var text = str(read(i))
    matches.push(text)
  }

  var match = matches[0]

  // If multiple items matches, show selection dialog.
  if (matches.length > 1) {
    var i = dialog(
      '.title', title,
      '.label', 'Showing ' + numItemsShow + ' items. Select one to paste.',
      '.style', 'QListWidget{font-family:mono}',
      '.list:', matches)
    if (!i)
      abort()
    match = matches[i]
  }

  // Paste matched item.
  copy(match)
  paste()
"

GlobalShortcut=meta+shift+v
Icon=\xf1fe
IsGlobalShortcut=true
Name=Recents
